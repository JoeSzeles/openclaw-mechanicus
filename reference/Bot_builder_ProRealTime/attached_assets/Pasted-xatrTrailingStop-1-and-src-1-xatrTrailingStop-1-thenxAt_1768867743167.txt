xatrTrailingStop[1] and src[1] > xatrTrailingStop[1] thenxAtrTrailingStop = max(xatrTrailingStop[1],src-nLoss)elseif src < xatrTrailingStop[1] and src[1] < xatrTrailingStop[1] thenxAtrTrailingStop = min(xatrTrailingStop[1],src+nLoss)elseif src > xatrTrailingStop[1] thenxAtrTrailingStop = src-nLosselsexAtrTrailingStop = src+nLossendifendifendif if src[1] < xatrTrailingStop[1] and src > xAtrTrailingStop[1] thenpos = 1r=250g=0b=0elseif src[1] > xatrTrailingStop[1] and src < xatrTrailingStop[1] thenpos = -1r=0g=0b=250elsepos = pos[1]endifendifendif ///////Trading conditionsema = average[1](src)above = ema crosses over xatrTrailingStopbelow = ema crosses under xatrTrailingStop buy1 = src > xatrTrailingStop and abovesell1 = src < xatrTrailingStop and below barbuy = src > xatrTrailingStopbarsell = src < xatrTrailingStop //////Plot signals and candlesif drawsignals thenif buy1 thendrawarrowup(barindex,low-0.15*averagetruerange[10])coloured(\"green\")elsif sell1 thendrawarrowdown(barindex,high+0.15*averagetruerange[10])coloured(\"red\")endifendif if colorcandles thenif barbuy thenrbar=0gbar=250bbar=0elsif barsell thenrbar=250gbar=0bbar=0elserbar=125gbar=125bbar=125endifDRAWCANDLE(open, high, low, close)coloured(rbar,gbar,bbar)endifreturn xatrTrailingStop as \"Trailing Stop\" coloured(r,g,b)style(line,2)\n//PRC_UT Bot Alerts\n//version = 1\n//15.02.24\n//Iván González @ www.prorealcode.com\n//Sharing ProRealTime knowledge\n///inputs\na = 1 //Key Vaule. 'This changes the sensitivity' - Decimal\nc = 10 //ATR period - Integer\ndrawsignals = 1 //Show arrows - Boolean\ncolorcandles = 1 //Color candles - Boolean\nheikin = 1 // boolean. True work as Heikin A\n/////////////////\nxatr = averagetruerange[c](close)\nnLoss = a * xatr\n \nif heikin then\nsrc = (open+close+high+low)/4\nelse\nsrc = close\nendif\n \nif barindex < c then\nxatrTrailingStop = undefined\npos = 0\nelse\nif src > xatrTrailingStop[1] and src[1] > xatrTrailingStop[1] then\nxAtrTrailingStop = max(xatrTrailingStop[1],src-nLoss)\nelse\nif src < xatrTrailingStop[1] and src[1] < xatrTrailingStop[1] then\nxAtrTrailingStop = min(xatrTrailingStop[1],src+nLoss)\nelse\nif src > xatrTrailingStop[1] then\nxAtrTrailingStop = src-nLoss\nelse\nxAtrTrailingStop = src+nLoss\nendif\nendif\nendif\n \nif src[1] < xatrTrailingStop[1] and src > xAtrTrailingStop[1] then\npos = 1\nr=250\ng=0\nb=0\nelse\nif src[1] > xatrTrailingStop[1] and src < xatrTrailingStop[1] then\npos = -1\nr=0\ng=0\nb=250\nelse\npos = pos[1]\nendif\nendif\nendif\n \n///////Trading conditions\nema = average[1](src)\nabove = ema crosses over xatrTrailingStop\nbelow = ema crosses under xatrTrailingStop\n \nbuy1 = src > xatrTrailingStop and above\nsell1 = src < xatrTrailingStop and below\n \nbarbuy = src > xatrTrailingStop\nbarsell = src < xatrTrailingStop\n \n//////Plot signals and candles\nif drawsignals then\nif buy1 then\ndrawarrowup(barindex,low-0.15*averagetruerange[10])coloured(\"green\")\nelsif sell1 then\ndrawarrowdown(barindex,high+0.15*averagetruerange[10])coloured(\"red\")\nendif\nendif\n \nif colorcandles then\nif barbuy then\nrbar=0\ngbar=250\nbbar=0\nelsif barsell then\nrbar=250\ngbar=0\nbbar=0\nelse\nrbar=125\ngbar=125\nbbar=125\nendif\nDRAWCANDLE(open, high, low, close)coloured(rbar,gbar,bbar)\nendif\nreturn xatrTrailingStop as \"Trailing Stop\" coloured(r,g,b)style(line,2)","url":"https://www.prorealcode.com/prorealtime-indicators/ut-bot-alerts-indicator/","searchUrl":null,"isRealPost":true}]'>